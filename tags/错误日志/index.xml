<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>错误日志 on Steve Sun</title><link>https://sund.site/tags/%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97/</link><description>Recent content in 错误日志 on Steve Sun</description><generator>Hugo</generator><language>zh-CN</language><copyright>Copyright © 2013-2025, Steve Sun.</copyright><lastBuildDate>Tue, 23 Aug 2022 22:18:00 +0800</lastBuildDate><follow_challenge><feedId>41397727810093074</feedId><userId>56666701051455488</userId></follow_challenge><atom:link href="https://sund.site/tags/%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97/index.xml" rel="self" type="application/rss+xml"/><item><title>规范的错误信息</title><link>https://sund.site/posts/2022/write-error-message/</link><pubDate>Tue, 23 Aug 2022 22:18:00 +0800</pubDate><guid>https://sund.site/posts/2022/write-error-message/</guid><description>&lt;p&gt;&lt;img src="https://sund.site/images/20221031083917.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;本文整理了 Google 官方文档中关于错误信息的编写规范。适用于有一定编程经验，尤其从事业务开发的程序员。&lt;/p&gt;
&lt;p&gt;通过本文你可以：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;写出风格统一、用户友好的错误信息&lt;/li&gt;
&lt;li&gt;提高代码的可维护性，降低沟通成本&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Google 文档原文：&lt;a href="https://developers.google.com/tech-writing/error-messages"&gt;Error Messages&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="基本原则"&gt;基本原则&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;错误不应该被掩盖 (Don&amp;rsquo;t fail silently)&lt;/li&gt;
&lt;li&gt;遵循语言的规范 (Follow the programming language guides)&lt;/li&gt;
&lt;li&gt;实现完整的错误模型 (Implement the full error model)
&lt;blockquote&gt;
&lt;p&gt;包含错误码、错误内容、错误原因、处理方法&lt;/p&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;避免吞掉问题根源 (Avoid swallowing the root cause)&lt;/li&gt;
&lt;li&gt;输出错误代码 (Log the error codes)&lt;/li&gt;
&lt;li&gt;快速抛出错误 (Raise errors immediately)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="解释错误原因"&gt;解释错误原因&lt;/h2&gt;
&lt;p&gt;使用错误信息给用户解释原因时，应该遵循：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;具体，准确，避免含糊。&lt;/li&gt;
&lt;li&gt;在错误信息中包含用户输入的错误内容。如果输入的内容特别长：
&lt;ul&gt;
&lt;li&gt;渐进地显示，提供一个可展开详情的省略号。&lt;/li&gt;
&lt;li&gt;截断内容，只保留必要部分。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;明确告诉用户，系统的要求和限制&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="解释如何处理问题"&gt;解释如何处理问题&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;对用户来说，错误信息必须有可操作性。也就是说，在解释了问题的原因后，说明如何解决这个问题。&lt;/li&gt;
&lt;li&gt;最好给用户提供一个例子。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="清晰的错误信息"&gt;清晰的错误信息&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;简明扼要，使用主动语态。（这方面内容可以参考&lt;a href="https://sund.site/posts/2022/technical-writing/"&gt;技术文档写作指南&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;避免出现双重否定句式。&lt;/li&gt;
&lt;li&gt;让目标用户能够理解，即根据用户掌握的知识，提供有帮助的内容。&lt;/li&gt;
&lt;li&gt;专业术语应前后一致。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="错误信息的格式"&gt;错误信息的格式&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;使用链接提供更多信息。&lt;/li&gt;
&lt;li&gt;渐进式呈现错误信息（比如可以展开详情的省略号）。&lt;/li&gt;
&lt;li&gt;错误提示应该贴近错误发生的位置。&lt;/li&gt;
&lt;li&gt;避免错误信息滥用字体或颜色。&lt;/li&gt;
&lt;li&gt;使用正确的语气:
&lt;ul&gt;
&lt;li&gt;不要告诉用户错在哪，告诉用户应该做什么。&lt;/li&gt;
&lt;li&gt;避免责备、幽默、道歉的语气。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="对后端开发的建议"&gt;对后端开发的建议&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;错误要有错误码&lt;/li&gt;
&lt;li&gt;可以在错误信息结构里提供一个指向错误解释的 ID，如：
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#fff;background-color:#1f1f24;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;#34;error&amp;#34;: &lt;span style="color:#fc6a5d"&gt;&amp;#34;Bad Request - Request is missing a required parameter: -collection_name. Update parameter and resubmit. Issue Reference Number BR0x0071&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>