<!doctype html><html lang=zh-CN><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://sund.site/favicon.ico><title>Python ä¾èµ–ç®¡ç†å·¥å…·çš„ç ”ç©¶ | Steve Sun</title>
<meta name=title content="Python ä¾èµ–ç®¡ç†å·¥å…·çš„ç ”ç©¶"><meta name=description content="å¤ªé•¿ä¸è¯»
å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œpoetry æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œå¯ä»¥è¯•è¯• pdmã€‚
æ··ä¹±çš„ Python
Python çš„ä¾èµ–ç®¡ç†å·¥å…· pip ä¸€ç›´è¢«ä¼—å¤šå¼€å‘è€…åæ§½ã€‚ä»æˆ‘ä¸ªäººè§’åº¦ï¼Œpip æœ‰ä¸‰ç‚¹è‡´å‘½ç¼ºé™·ï¼š

æ— æ³•è§£å†³ Python ä¾èµ–ç¯å¢ƒçš„éš”ç¦»é—®é¢˜
ä¾èµ–ç®¡ç†æ–‡ä»¶ requirements.txt æ— æ³•çœŸæ­£å¼€ç®±å³ç”¨
æ‰“åŒ…éƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®

ç¯å¢ƒéš”ç¦»é—®é¢˜
Python çš„ä¾èµ–åº“å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆ/home/${USER}/.localï¼‰ã€‚ä½†å¦‚æœä½ åŒæ—¶ç®¡ç†å¤šä¸ª Python é¡¹ç›®ï¼Œå°±éœ€è¦å°†ä¸åŒé¡¹ç›®çš„ä¾èµ–æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹åˆ†å¼€ç®¡ç†ã€‚
ä¼ ç»Ÿæ–¹å¼æ˜¯åŸºäº virtualenv åˆ›å»ºéš”ç¦»çš„ Python bin æ–‡ä»¶å’Œé¡¹ç›®ä¾èµ–çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ‰€è°“è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºï¼Œåªæ˜¯ä¸ªç»‘å®š terminal session çš„å‘½ä»¤ç¯å¢ƒï¼‰ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š

å¼€å‘è€…éœ€è¦ç»å¸¸å…³æ³¨â€œæˆ‘ç°åœ¨å¤„äºå“ªä¸ªé¡¹ç›®ç›®å½•ï¼Ÿæˆ‘éœ€è¦åˆ‡æ¢åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒé‡Œå—ï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚
virtualenv åªè§£å†³ç¯å¢ƒéš”ç¦»ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥æ›´æ–°ä¾èµ–æ–‡ä»¶ã€æ‰“åŒ…å‘å¸ƒã€‚

ä¾èµ–å®‰è£…é—®é¢˜
Python ç®¡ç†ä¾èµ–çš„æ‰‹æ®µï¼Œæœ€æ—©æ˜¯æ‰‹åŠ¨æ‰§è¡Œpip install xxxæ¥å®‰è£…ä¾èµ–ï¼Œæœ€å pip freeze æ¥å¯¼å‡ºä¾èµ–åˆ—è¡¨åˆ°ä¸€ä¸ª requirements.txt æ–‡ä»¶é‡Œã€‚ä½†æ˜¯è¿™ä¸ª txt æ–‡ä»¶éå¸¸ä»¤äººå›°æƒ‘ã€‚

ä¸åƒ NodeJS é‚£ä¹ˆæ–¹ä¾¿ï¼Œæƒ³è¦å‡ã€é™çº§æŸä¸ªä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥åˆ° txt æ–‡ä»¶é‡Œã€‚
å¹³é“ºå¼åœ°åˆ—å‡ºäº†æ‰€æœ‰ä¸€çº§ã€äºŒçº§ä¾èµ–åŒ…ï¼ˆå³ä¾èµ–åŒ…çš„ä¾èµ–åŒ…ï¼‰ã€‚å› ä¸º Python æŸäº›ä¾èµ–åˆåŸºäºç³»ç»Ÿä¸Šå®‰è£…çš„ C åº“ç‰ˆæœ¬ï¼Œè¿™å°±å¯¼è‡´ä¸åŒç³»ç»Ÿç¯å¢ƒä¸Šæ‰§è¡Œ pip install -r requirements.txt å¾—åˆ°çš„æ•ˆæœå¹¶ä¸ä¸€è‡´ï¼Œç»å¸¸æŠ¥é”™ã€‚

æ‰“åŒ…éƒ¨ç½²é—®é¢˜
Python ä¸€èˆ¬ä½¿ç”¨ wheel æ‰“åŒ…äºŒè¿›åˆ¶ï¼Œå®ƒåªè§£å†³æ‰“åŒ…é—®é¢˜ï¼Œç¯å¢ƒä¾èµ–æ˜¯é  pip å’Œ setuptools å®Œæˆï¼Œæ‰€ä»¥ä½¿ç”¨ wheel ä½ ä»ç„¶è¦æ“å¿ƒç¯å¢ƒéš”ç¦»å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚"><meta name=keywords content="python,"><link rel=canonical href=https://sund.site/posts/2023/python-packaging/><meta property="og:url" content="https://sund.site/posts/2023/python-packaging/"><meta property="og:site_name" content="Steve Sun"><meta property="og:title" content="Python ä¾èµ–ç®¡ç†å·¥å…·çš„ç ”ç©¶"><meta property="og:description" content="å¤ªé•¿ä¸è¯» å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œpoetry æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œå¯ä»¥è¯•è¯• pdmã€‚
æ··ä¹±çš„ Python Python çš„ä¾èµ–ç®¡ç†å·¥å…· pip ä¸€ç›´è¢«ä¼—å¤šå¼€å‘è€…åæ§½ã€‚ä»æˆ‘ä¸ªäººè§’åº¦ï¼Œpip æœ‰ä¸‰ç‚¹è‡´å‘½ç¼ºé™·ï¼š
æ— æ³•è§£å†³ Python ä¾èµ–ç¯å¢ƒçš„éš”ç¦»é—®é¢˜ ä¾èµ–ç®¡ç†æ–‡ä»¶ requirements.txt æ— æ³•çœŸæ­£å¼€ç®±å³ç”¨ æ‰“åŒ…éƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½® ç¯å¢ƒéš”ç¦»é—®é¢˜ Python çš„ä¾èµ–åº“å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆ/home/${USER}/.localï¼‰ã€‚ä½†å¦‚æœä½ åŒæ—¶ç®¡ç†å¤šä¸ª Python é¡¹ç›®ï¼Œå°±éœ€è¦å°†ä¸åŒé¡¹ç›®çš„ä¾èµ–æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹åˆ†å¼€ç®¡ç†ã€‚
ä¼ ç»Ÿæ–¹å¼æ˜¯åŸºäº virtualenv åˆ›å»ºéš”ç¦»çš„ Python bin æ–‡ä»¶å’Œé¡¹ç›®ä¾èµ–çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ‰€è°“è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºï¼Œåªæ˜¯ä¸ªç»‘å®š terminal session çš„å‘½ä»¤ç¯å¢ƒï¼‰ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š
å¼€å‘è€…éœ€è¦ç»å¸¸å…³æ³¨â€œæˆ‘ç°åœ¨å¤„äºå“ªä¸ªé¡¹ç›®ç›®å½•ï¼Ÿæˆ‘éœ€è¦åˆ‡æ¢åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒé‡Œå—ï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚ virtualenv åªè§£å†³ç¯å¢ƒéš”ç¦»ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥æ›´æ–°ä¾èµ–æ–‡ä»¶ã€æ‰“åŒ…å‘å¸ƒã€‚ ä¾èµ–å®‰è£…é—®é¢˜ Python ç®¡ç†ä¾èµ–çš„æ‰‹æ®µï¼Œæœ€æ—©æ˜¯æ‰‹åŠ¨æ‰§è¡Œpip install xxxæ¥å®‰è£…ä¾èµ–ï¼Œæœ€å pip freeze æ¥å¯¼å‡ºä¾èµ–åˆ—è¡¨åˆ°ä¸€ä¸ª requirements.txt æ–‡ä»¶é‡Œã€‚ä½†æ˜¯è¿™ä¸ª txt æ–‡ä»¶éå¸¸ä»¤äººå›°æƒ‘ã€‚
ä¸åƒ NodeJS é‚£ä¹ˆæ–¹ä¾¿ï¼Œæƒ³è¦å‡ã€é™çº§æŸä¸ªä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥åˆ° txt æ–‡ä»¶é‡Œã€‚ å¹³é“ºå¼åœ°åˆ—å‡ºäº†æ‰€æœ‰ä¸€çº§ã€äºŒçº§ä¾èµ–åŒ…ï¼ˆå³ä¾èµ–åŒ…çš„ä¾èµ–åŒ…ï¼‰ã€‚å› ä¸º Python æŸäº›ä¾èµ–åˆåŸºäºç³»ç»Ÿä¸Šå®‰è£…çš„ C åº“ç‰ˆæœ¬ï¼Œè¿™å°±å¯¼è‡´ä¸åŒç³»ç»Ÿç¯å¢ƒä¸Šæ‰§è¡Œ pip install -r requirements.txt å¾—åˆ°çš„æ•ˆæœå¹¶ä¸ä¸€è‡´ï¼Œç»å¸¸æŠ¥é”™ã€‚ æ‰“åŒ…éƒ¨ç½²é—®é¢˜ Python ä¸€èˆ¬ä½¿ç”¨ wheel æ‰“åŒ…äºŒè¿›åˆ¶ï¼Œå®ƒåªè§£å†³æ‰“åŒ…é—®é¢˜ï¼Œç¯å¢ƒä¾èµ–æ˜¯é  pip å’Œ setuptools å®Œæˆï¼Œæ‰€ä»¥ä½¿ç”¨ wheel ä½ ä»ç„¶è¦æ“å¿ƒç¯å¢ƒéš”ç¦»å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-19T08:05:27+08:00"><meta property="article:modified_time" content="2023-01-19T08:05:27+08:00"><meta property="article:tag" content="Python"><meta property="og:image" content="https://sund.site/images/share.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sund.site/images/share.png"><meta name=twitter:title content="Python ä¾èµ–ç®¡ç†å·¥å…·çš„ç ”ç©¶"><meta name=twitter:description content="å¤ªé•¿ä¸è¯» å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œpoetry æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œå¯ä»¥è¯•è¯• pdmã€‚
æ··ä¹±çš„ Python Python çš„ä¾èµ–ç®¡ç†å·¥å…· pip ä¸€ç›´è¢«ä¼—å¤šå¼€å‘è€…åæ§½ã€‚ä»æˆ‘ä¸ªäººè§’åº¦ï¼Œpip æœ‰ä¸‰ç‚¹è‡´å‘½ç¼ºé™·ï¼š
æ— æ³•è§£å†³ Python ä¾èµ–ç¯å¢ƒçš„éš”ç¦»é—®é¢˜ ä¾èµ–ç®¡ç†æ–‡ä»¶ requirements.txt æ— æ³•çœŸæ­£å¼€ç®±å³ç”¨ æ‰“åŒ…éƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½® ç¯å¢ƒéš”ç¦»é—®é¢˜ Python çš„ä¾èµ–åº“å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆ/home/${USER}/.localï¼‰ã€‚ä½†å¦‚æœä½ åŒæ—¶ç®¡ç†å¤šä¸ª Python é¡¹ç›®ï¼Œå°±éœ€è¦å°†ä¸åŒé¡¹ç›®çš„ä¾èµ–æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹åˆ†å¼€ç®¡ç†ã€‚
ä¼ ç»Ÿæ–¹å¼æ˜¯åŸºäº virtualenv åˆ›å»ºéš”ç¦»çš„ Python bin æ–‡ä»¶å’Œé¡¹ç›®ä¾èµ–çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ‰€è°“è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºï¼Œåªæ˜¯ä¸ªç»‘å®š terminal session çš„å‘½ä»¤ç¯å¢ƒï¼‰ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š
å¼€å‘è€…éœ€è¦ç»å¸¸å…³æ³¨â€œæˆ‘ç°åœ¨å¤„äºå“ªä¸ªé¡¹ç›®ç›®å½•ï¼Ÿæˆ‘éœ€è¦åˆ‡æ¢åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒé‡Œå—ï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚ virtualenv åªè§£å†³ç¯å¢ƒéš”ç¦»ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥æ›´æ–°ä¾èµ–æ–‡ä»¶ã€æ‰“åŒ…å‘å¸ƒã€‚ ä¾èµ–å®‰è£…é—®é¢˜ Python ç®¡ç†ä¾èµ–çš„æ‰‹æ®µï¼Œæœ€æ—©æ˜¯æ‰‹åŠ¨æ‰§è¡Œpip install xxxæ¥å®‰è£…ä¾èµ–ï¼Œæœ€å pip freeze æ¥å¯¼å‡ºä¾èµ–åˆ—è¡¨åˆ°ä¸€ä¸ª requirements.txt æ–‡ä»¶é‡Œã€‚ä½†æ˜¯è¿™ä¸ª txt æ–‡ä»¶éå¸¸ä»¤äººå›°æƒ‘ã€‚
ä¸åƒ NodeJS é‚£ä¹ˆæ–¹ä¾¿ï¼Œæƒ³è¦å‡ã€é™çº§æŸä¸ªä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥åˆ° txt æ–‡ä»¶é‡Œã€‚ å¹³é“ºå¼åœ°åˆ—å‡ºäº†æ‰€æœ‰ä¸€çº§ã€äºŒçº§ä¾èµ–åŒ…ï¼ˆå³ä¾èµ–åŒ…çš„ä¾èµ–åŒ…ï¼‰ã€‚å› ä¸º Python æŸäº›ä¾èµ–åˆåŸºäºç³»ç»Ÿä¸Šå®‰è£…çš„ C åº“ç‰ˆæœ¬ï¼Œè¿™å°±å¯¼è‡´ä¸åŒç³»ç»Ÿç¯å¢ƒä¸Šæ‰§è¡Œ pip install -r requirements.txt å¾—åˆ°çš„æ•ˆæœå¹¶ä¸ä¸€è‡´ï¼Œç»å¸¸æŠ¥é”™ã€‚ æ‰“åŒ…éƒ¨ç½²é—®é¢˜ Python ä¸€èˆ¬ä½¿ç”¨ wheel æ‰“åŒ…äºŒè¿›åˆ¶ï¼Œå®ƒåªè§£å†³æ‰“åŒ…é—®é¢˜ï¼Œç¯å¢ƒä¾èµ–æ˜¯é  pip å’Œ setuptools å®Œæˆï¼Œæ‰€ä»¥ä½¿ç”¨ wheel ä½ ä»ç„¶è¦æ“å¿ƒç¯å¢ƒéš”ç¦»å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚"><meta itemprop=name content="Python ä¾èµ–ç®¡ç†å·¥å…·çš„ç ”ç©¶"><meta itemprop=description content="å¤ªé•¿ä¸è¯» å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œpoetry æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œå¯ä»¥è¯•è¯• pdmã€‚
æ··ä¹±çš„ Python Python çš„ä¾èµ–ç®¡ç†å·¥å…· pip ä¸€ç›´è¢«ä¼—å¤šå¼€å‘è€…åæ§½ã€‚ä»æˆ‘ä¸ªäººè§’åº¦ï¼Œpip æœ‰ä¸‰ç‚¹è‡´å‘½ç¼ºé™·ï¼š
æ— æ³•è§£å†³ Python ä¾èµ–ç¯å¢ƒçš„éš”ç¦»é—®é¢˜ ä¾èµ–ç®¡ç†æ–‡ä»¶ requirements.txt æ— æ³•çœŸæ­£å¼€ç®±å³ç”¨ æ‰“åŒ…éƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½® ç¯å¢ƒéš”ç¦»é—®é¢˜ Python çš„ä¾èµ–åº“å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆ/home/${USER}/.localï¼‰ã€‚ä½†å¦‚æœä½ åŒæ—¶ç®¡ç†å¤šä¸ª Python é¡¹ç›®ï¼Œå°±éœ€è¦å°†ä¸åŒé¡¹ç›®çš„ä¾èµ–æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹åˆ†å¼€ç®¡ç†ã€‚
ä¼ ç»Ÿæ–¹å¼æ˜¯åŸºäº virtualenv åˆ›å»ºéš”ç¦»çš„ Python bin æ–‡ä»¶å’Œé¡¹ç›®ä¾èµ–çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ‰€è°“è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºï¼Œåªæ˜¯ä¸ªç»‘å®š terminal session çš„å‘½ä»¤ç¯å¢ƒï¼‰ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š
å¼€å‘è€…éœ€è¦ç»å¸¸å…³æ³¨â€œæˆ‘ç°åœ¨å¤„äºå“ªä¸ªé¡¹ç›®ç›®å½•ï¼Ÿæˆ‘éœ€è¦åˆ‡æ¢åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒé‡Œå—ï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚ virtualenv åªè§£å†³ç¯å¢ƒéš”ç¦»ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥æ›´æ–°ä¾èµ–æ–‡ä»¶ã€æ‰“åŒ…å‘å¸ƒã€‚ ä¾èµ–å®‰è£…é—®é¢˜ Python ç®¡ç†ä¾èµ–çš„æ‰‹æ®µï¼Œæœ€æ—©æ˜¯æ‰‹åŠ¨æ‰§è¡Œpip install xxxæ¥å®‰è£…ä¾èµ–ï¼Œæœ€å pip freeze æ¥å¯¼å‡ºä¾èµ–åˆ—è¡¨åˆ°ä¸€ä¸ª requirements.txt æ–‡ä»¶é‡Œã€‚ä½†æ˜¯è¿™ä¸ª txt æ–‡ä»¶éå¸¸ä»¤äººå›°æƒ‘ã€‚
ä¸åƒ NodeJS é‚£ä¹ˆæ–¹ä¾¿ï¼Œæƒ³è¦å‡ã€é™çº§æŸä¸ªä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥åˆ° txt æ–‡ä»¶é‡Œã€‚ å¹³é“ºå¼åœ°åˆ—å‡ºäº†æ‰€æœ‰ä¸€çº§ã€äºŒçº§ä¾èµ–åŒ…ï¼ˆå³ä¾èµ–åŒ…çš„ä¾èµ–åŒ…ï¼‰ã€‚å› ä¸º Python æŸäº›ä¾èµ–åˆåŸºäºç³»ç»Ÿä¸Šå®‰è£…çš„ C åº“ç‰ˆæœ¬ï¼Œè¿™å°±å¯¼è‡´ä¸åŒç³»ç»Ÿç¯å¢ƒä¸Šæ‰§è¡Œ pip install -r requirements.txt å¾—åˆ°çš„æ•ˆæœå¹¶ä¸ä¸€è‡´ï¼Œç»å¸¸æŠ¥é”™ã€‚ æ‰“åŒ…éƒ¨ç½²é—®é¢˜ Python ä¸€èˆ¬ä½¿ç”¨ wheel æ‰“åŒ…äºŒè¿›åˆ¶ï¼Œå®ƒåªè§£å†³æ‰“åŒ…é—®é¢˜ï¼Œç¯å¢ƒä¾èµ–æ˜¯é  pip å’Œ setuptools å®Œæˆï¼Œæ‰€ä»¥ä½¿ç”¨ wheel ä½ ä»ç„¶è¦æ“å¿ƒç¯å¢ƒéš”ç¦»å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚"><meta itemprop=datePublished content="2023-01-19T08:05:27+08:00"><meta itemprop=dateModified content="2023-01-19T08:05:27+08:00"><meta itemprop=wordCount content="250"><meta itemprop=image content="https://sund.site/images/share.png"><meta itemprop=keywords content="Python"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width-max:720px;--font-primary:Verdana, sans-serif;--font-secondary:monospace;--font-size-primary:1em;--font-size-secondary:0.8em;--body-bg-color:#fcfcfc;--bold-text-color:#222;--body-text-color:#444;--link-color:#3273dc;--link-visited-color:#8b6fcb;--table-border-color:#f2f2f2;--table-th-bg-color:#f2f2f2;--img-border-color:#f2f2f2;--code-bg-color:#f2f2f2;--code-text-color:#222;--blockquote-border-color:#666;--blockquote-text-color:#666;--upvoted-color:#FA8072}@media(prefers-color-scheme:dark){:root{--body-bg-color:#1c1c1c;--bold-text-color:#eee;--body-text-color:#ddd;--link-color:#8cc2dd;--link-visited-color:#c3b1ee;--table-border-color:#999;--table-th-bg-color:#999;--img-border-color:#999;--code-bg-color:#555;--code-text-color:#ddd;--blockquote-border-color:#ccc;--blockquote-text-color:#ccc}}body{font-family:var(--font-primary);font-size:var(--font-size-primary);margin:auto;padding:20px;max-width:var(--width-max);text-align:left;background-color:var(--body-bg-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--body-text-color)}h1,h2,h3,h4,h5,h6,strong,b{color:var(--bold-text-color)}h1,h2,h3,h4,h5,h6{margin:16px 0}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}.title{text-decoration:none;border:0}.title:hover{text-decoration:none}.title span{font-weight:400}nav a{margin-right:8px}textarea{width:100%;font-size:16px}input{font-size:14px}content{line-height:1.6}table{width:100%;border-collapse:collapse;border:1px solid var(--table-border-color);border-radius:4px}th,td{border:1px solid var(--table-border-color);padding:4px}th{background-color:var(--table-th-bg-color)}hr{border:0;border-top:1px dashed}img{max-width:100%;display:block;margin-left:auto;margin-right:auto;border:1px solid var(--img-border-color);border-radius:4px;content-visibility:auto;loading:lazy}img[src*="#minipic"]{max-width:50%;margin-left:0;margin-right:auto}i{font-style:normal}time{font-family:var(--font-secondary);font-size:15px}code{font-family:var(--font-secondary);background-color:var(--code-bg-color);color:var(--code-text-color);padding:2px;border-radius:4px}pre code{display:block;padding:16px;white-space:pre-wrap;overflow-x:auto}div.highlight pre{border-radius:4px}div.highlight code{background-color:var(--code-bg-color);color:var(--code-text-color)}blockquote{border-left:2px solid var(--blockquote-border-color);color:var(--blockquote-text-color);margin:0;padding-left:16px;font-style:normal}blockquote p{margin:0}footer{padding:25px 0;text-align:center;font-size:var(--font-size-secondary)}ul li:has(input){list-style-type:none;margin-left:-25.5px}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li span.grouped{flex:0 0 80px}ul.blog-posts li a:visited{color:var(--link-visited-color)}div.toc{position:fixed;top:50%;left:calc((100vw + var(--width-max))/2);transform:translateY(-50%);width:calc((90vw - var(--width-max))/2);max-height:80vh;overflow-y:auto;padding:20px 8px;z-index:99;&::-webkit-scrollbar { display:none; } -ms-overflow-style:none;scrollbar-width:none}div.toc ul{list-style-type:none;padding-left:0}div.toc ul li{margin:8px 0}div.toc ul li a{text-decoration:none;color:var(--blockquote-text-color)}div.toc ul li a:hover{color:var(--link-color)}button.upvote-btn{margin:0;padding:0;border:none;background:0 0;cursor:pointer;display:flex;flex-direction:column;align-items:center;color:var(--body-text-color)}button.upvoted{color:var(--upvoted-color)}span.upvote-count{margin-top:-4px;font-size:smaller}@media(max-width:500px){img[src*="#minipic"]{max-width:100%;margin-left:auto;margin-right:auto}div.toc{display:none}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-XJJVVQ0LBH"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XJJVVQ0LBH")</script></head><body><header><a href=/ class=title><h1>Steve Sun</h1></a><nav><a href=/>Home</a>
<a href=/friends/>Friends</a>
<a href=/posts/>Posts</a></nav></header><main><content><h2 id=å¤ªé•¿ä¸è¯»>å¤ªé•¿ä¸è¯»</h2><p>å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œ<a href=https://python-poetry.org/>poetry</a> æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œå¯ä»¥è¯•è¯• <a href=https://pdm.fming.dev/latest/>pdm</a>ã€‚</p><h2 id=æ··ä¹±çš„-python>æ··ä¹±çš„ Python</h2><p>Python çš„ä¾èµ–ç®¡ç†å·¥å…· <code>pip</code> ä¸€ç›´è¢«ä¼—å¤šå¼€å‘è€…åæ§½ã€‚ä»æˆ‘ä¸ªäººè§’åº¦ï¼Œ<code>pip</code> æœ‰ä¸‰ç‚¹è‡´å‘½ç¼ºé™·ï¼š</p><ul><li>æ— æ³•è§£å†³ Python ä¾èµ–ç¯å¢ƒçš„éš”ç¦»é—®é¢˜</li><li>ä¾èµ–ç®¡ç†æ–‡ä»¶ <code>requirements.txt</code> æ— æ³•çœŸæ­£å¼€ç®±å³ç”¨</li><li>æ‰“åŒ…éƒ¨ç½²éå¸¸éº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®</li></ul><h3 id=ç¯å¢ƒéš”ç¦»é—®é¢˜>ç¯å¢ƒéš”ç¦»é—®é¢˜</h3><p>Python çš„ä¾èµ–åº“å¯ä»¥å®‰è£…åˆ°ç³»ç»Ÿå…¨å±€ï¼Œä¹Ÿå¯ä»¥å®‰è£…åˆ°ç”¨æˆ·ç›®å½•ï¼ˆ<code>/home/${USER}/.local</code>ï¼‰ã€‚ä½†å¦‚æœä½ åŒæ—¶ç®¡ç†å¤šä¸ª Python é¡¹ç›®ï¼Œå°±éœ€è¦å°†ä¸åŒé¡¹ç›®çš„ä¾èµ–æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹åˆ†å¼€ç®¡ç†ã€‚</p><p>ä¼ ç»Ÿæ–¹å¼æ˜¯åŸºäº virtualenv åˆ›å»ºéš”ç¦»çš„ Python bin æ–‡ä»¶å’Œé¡¹ç›®ä¾èµ–çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ‰€è°“è™šæ‹Ÿç¯å¢ƒå¹¶ä¸æ˜¯è™šæ‹Ÿæœºï¼Œåªæ˜¯ä¸ªç»‘å®š terminal session çš„å‘½ä»¤ç¯å¢ƒï¼‰ã€‚è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š</p><ul><li>å¼€å‘è€…éœ€è¦ç»å¸¸å…³æ³¨â€œæˆ‘ç°åœ¨å¤„äºå“ªä¸ªé¡¹ç›®ç›®å½•ï¼Ÿæˆ‘éœ€è¦åˆ‡æ¢åˆ°å½“å‰è™šæ‹Ÿç¯å¢ƒé‡Œå—ï¼Ÿâ€ä¹‹ç±»çš„é—®é¢˜ã€‚</li><li>virtualenv åªè§£å†³ç¯å¢ƒéš”ç¦»ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥æ›´æ–°ä¾èµ–æ–‡ä»¶ã€æ‰“åŒ…å‘å¸ƒã€‚</li></ul><h3 id=ä¾èµ–å®‰è£…é—®é¢˜>ä¾èµ–å®‰è£…é—®é¢˜</h3><p>Python ç®¡ç†ä¾èµ–çš„æ‰‹æ®µï¼Œæœ€æ—©æ˜¯æ‰‹åŠ¨æ‰§è¡Œ<code>pip install xxx</code>æ¥å®‰è£…ä¾èµ–ï¼Œæœ€å <code>pip freeze</code> æ¥å¯¼å‡ºä¾èµ–åˆ—è¡¨åˆ°ä¸€ä¸ª <code>requirements.txt</code> æ–‡ä»¶é‡Œã€‚ä½†æ˜¯è¿™ä¸ª txt æ–‡ä»¶éå¸¸ä»¤äººå›°æƒ‘ã€‚</p><ul><li>ä¸åƒ NodeJS é‚£ä¹ˆæ–¹ä¾¿ï¼Œæƒ³è¦å‡ã€é™çº§æŸä¸ªä¾èµ–ç‰ˆæœ¬ï¼Œæ— æ³•è‡ªåŠ¨åŒæ­¥åˆ° txt æ–‡ä»¶é‡Œã€‚</li><li>å¹³é“ºå¼åœ°åˆ—å‡ºäº†æ‰€æœ‰ä¸€çº§ã€äºŒçº§ä¾èµ–åŒ…ï¼ˆå³ä¾èµ–åŒ…çš„ä¾èµ–åŒ…ï¼‰ã€‚å› ä¸º Python æŸäº›ä¾èµ–åˆåŸºäºç³»ç»Ÿä¸Šå®‰è£…çš„ C åº“ç‰ˆæœ¬ï¼Œè¿™å°±å¯¼è‡´ä¸åŒç³»ç»Ÿç¯å¢ƒä¸Šæ‰§è¡Œ <code>pip install -r requirements.txt</code> å¾—åˆ°çš„æ•ˆæœå¹¶ä¸ä¸€è‡´ï¼Œç»å¸¸æŠ¥é”™ã€‚</li></ul><h3 id=æ‰“åŒ…éƒ¨ç½²é—®é¢˜>æ‰“åŒ…éƒ¨ç½²é—®é¢˜</h3><p>Python ä¸€èˆ¬ä½¿ç”¨ <code>wheel</code> æ‰“åŒ…äºŒè¿›åˆ¶ï¼Œå®ƒåªè§£å†³æ‰“åŒ…é—®é¢˜ï¼Œç¯å¢ƒä¾èµ–æ˜¯é  pip å’Œ setuptools å®Œæˆï¼Œæ‰€ä»¥ä½¿ç”¨ wheel ä½ ä»ç„¶è¦æ“å¿ƒç¯å¢ƒéš”ç¦»å’Œä¾èµ–ç®¡ç†é—®é¢˜ã€‚</p><p>å¦å¤–åŸºäº Python å„ç‰ˆæœ¬ä¹‹é—´å…¼å®¹æ€§é—®é¢˜å’Œåº•å±‚å®ç°ä¸Šçš„ä¸å¯æŠ—æ‹’åŠ›é‡ï¼Œwheel ä¹Ÿç»å¸¸ä¼šè«åå…¶å¦™å¤±è´¥ã€‚</p><h2 id=ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ>ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ</h2><p>ä¸€ç›´ä»¥æ¥ï¼Œå‡ºç°è¿‡ <code>pipx</code>ï¼Œ<code>pipenv</code>ï¼Œ <code>conda</code>ï¼Œ<code>poetry</code> ä»¥åŠæˆ‘æœ€è¿‘æ¥è§¦çš„ <code>pdm</code>ã€‚ä»–ä»¬éƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šè§£å†³äº† Python çš„é—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« ï¼š</p><p><a href=https://chriswarrick.com/blog/2023/01/15/how-to-improve-python-packaging>How to improve Python packaging, or why fourteen tools are at least twelve too many</a></p><p>å¯¹æ¯”äº†å„ç§å·¥å…·çš„åˆ©å¼Šã€‚æœ€åå¾—å‡ºç»“è®ºæ˜¯ poetry å’Œ pdm æ˜¯ç›®å‰æœ€åˆé€‚çš„å·¥å…·ã€‚è€Œ pdm æ˜¯ç›®å‰å”¯ä¸€æ”¯æŒ <a href=https://peps.python.org/pep-0582/>PEP 582</a> çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚</p><h3 id=ä»€ä¹ˆæ˜¯-pep-582>ä»€ä¹ˆæ˜¯ PEP 582</h3><blockquote><p>This PEP proposes to add to Python a mechanism to automatically recognize a <code>__pypackages__</code> directory and prefer importing packages installed in this location over user or global site-packages. This will avoid the steps to create, activate or deactivate â€œvirtual environmentsâ€. Python will use the <code>__pypackages__</code> from the base directory of the script when present.</p></blockquote><p>è¿™ä¸ª PEP çš„ç›®çš„å°±æ˜¯åŸºäºä¸€ä¸ªæ–‡ä»¶å¤¹ <code>__pypackages__ </code>æ¥ç®¡ç† Python çš„ä¾èµ–ï¼Œç±»ä¼¼ nodejs çš„<code>node_modules</code>ï¼Œç”¨æˆ·ä¸éœ€è¦å†åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ¥éš”ç¦»ä¾èµ–åŒ…ã€‚Python ä¼šè‡ªåŠ¨è¯†åˆ«å’Œå®‰è£…ä¾èµ–ã€‚</p><blockquote><p>æ›´æ–°äº 2023 å¹´ 7 æœˆ 2 æ—¥ï¼šPEP 582 ææ¡ˆå·²ç»è¢«æ‹’ç»ï¼ŒPDM æš‚æ—¶ä»ç„¶æ”¯æŒï¼Œä½†æ˜¯ä¸å»ºè®®å¼€å‘è€…ä½¿ç”¨è¿™ä¸€ç‰¹æ€§ã€‚</p></blockquote><h3 id=pdm>PDM</h3><p>PDM å®ç°äº† PEP 582ï¼è¿™è®©æˆ‘ä»¬åœ¨è§£å†³ Python ä¾èµ–é—®é¢˜æ—¶ä¸ç”¨å†è€ƒè™‘è™šæ‹Ÿç¯å¢ƒã€‚</p><h4 id=åˆå§‹åŒ–é¡¹ç›®>åˆå§‹åŒ–é¡¹ç›®</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pdm init
</span></span></code></pre></div><p>ä¹‹å PDM ä¼šé—®å‡ ä¸ªé—®é¢˜ï¼Œè®°å¾—é€‰æ‹©<strong>ä¸ä½¿ç”¨è™šæ‹Ÿæœºç¯å¢ƒ</strong>ï¼Œè¿™æ · PDM å°±ä¼šé»˜è®¤ä½¿ç”¨ PEP 582 çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨é¡¹ç›®ä¸‹ç”Ÿæˆä¸€ä¸ªç±»ä¼¼ NodeJS çš„ <code>__pypackages__</code>ã€‚</p><p>å‰©ä¸‹çš„æ“ä½œå°±è·Ÿ NodeJS çš„ npm éå¸¸åƒäº†ã€‚</p><p>æ·»åŠ ä¸€ä¸ªä¾èµ–ä¹‹åï¼ŒPDM ä¼šè‡ªåŠ¨æ›´æ–°<code>pyproject.toml</code>æ–‡ä»¶ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pdm add requests
</span></span></code></pre></div><h4 id=å®‰è£…é¡¹ç›®ä¾èµ–>å®‰è£…é¡¹ç›®ä¾èµ–</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pdm install
</span></span></code></pre></div><h4 id=å¯åŠ¨é¡¹ç›®>å¯åŠ¨é¡¹ç›®</h4><p>å…ˆåœ¨ <code>pyproject.toml</code>é‡Œæ·»åŠ </p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#f92672>[</span>tool.pdm.scripts<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>start <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;flask run -p 54321&#34;</span>
</span></span></code></pre></div><p>ç„¶åæ‰§è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pdm run start
</span></span></code></pre></div><h4 id=æ‰“åŒ…éƒ¨ç½²>æ‰“åŒ…éƒ¨ç½²</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pdm build
</span></span><span style=display:flex><span>pdm publish
</span></span></code></pre></div><h2 id=æ€»ç»“>æ€»ç»“</h2><p>å¦‚æœä½ ä»äº‹ç§‘ç ”å·¥ä½œï¼Œç”¨ <code>conda</code>ã€‚</p><p>å¦‚æœä½ ä»äº‹å·¥ç¨‹é¡¹ç›®ï¼Œ<code>poetry</code>æ˜¯ç›®å‰ä¸šå†…ç”¨çš„æœ€å¤šçš„æ–¹æ¡ˆï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å®ƒæ˜¯ä¸ªä¸é”™çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚ä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ Python çš„ virtualenvï¼Œ<code>pdm</code>æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p></content><p><a href=https://sund.site/tags/python/>#Python</a></p><div class=toc><nav id=TableOfContents><ul><li><a href=#å¤ªé•¿ä¸è¯»>å¤ªé•¿ä¸è¯»</a></li><li><a href=#æ··ä¹±çš„-python>æ··ä¹±çš„ Python</a><ul><li><a href=#ç¯å¢ƒéš”ç¦»é—®é¢˜>ç¯å¢ƒéš”ç¦»é—®é¢˜</a></li><li><a href=#ä¾èµ–å®‰è£…é—®é¢˜>ä¾èµ–å®‰è£…é—®é¢˜</a></li><li><a href=#æ‰“åŒ…éƒ¨ç½²é—®é¢˜>æ‰“åŒ…éƒ¨ç½²é—®é¢˜</a></li></ul></li><li><a href=#ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ>ç°æœ‰çš„è§£å†³æ–¹æ¡ˆ</a><ul><li><a href=#ä»€ä¹ˆæ˜¯-pep-582>ä»€ä¹ˆæ˜¯ PEP 582</a></li><li><a href=#pdm>PDM</a><ul><li><a href=#åˆå§‹åŒ–é¡¹ç›®>åˆå§‹åŒ–é¡¹ç›®</a></li><li><a href=#å®‰è£…é¡¹ç›®ä¾èµ–>å®‰è£…é¡¹ç›®ä¾èµ–</a></li><li><a href=#å¯åŠ¨é¡¹ç›®>å¯åŠ¨é¡¹ç›®</a></li><li><a href=#æ‰“åŒ…éƒ¨ç½²>æ‰“åŒ…éƒ¨ç½²</a></li></ul></li></ul></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ul></nav></div></main><footer>Subscribe via <a href=/index.xml>RSS</a>.<br>Made with
<a href=https://github.com/rokcso/hugo-bearblog-neo/>Hugo Bear Neo</a>.<br>Copyright Â© 2013-2025, Steve Sun.
ğŸ—ºï¸ <a href=/sitemap.xml>Sitemap</a>.</footer></body></html>