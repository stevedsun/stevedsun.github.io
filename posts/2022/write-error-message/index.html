<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Steve Sun"><title>规范的错误信息 ｜ 電波障害</title><meta name=description content="本文整理了 Google 官方文档中关于错误信息的编写规范。适用于有一定编程经验，尤其从事业务"><meta name=keywords content="Steve Sun,Notion,Develop,Programm,Coding,Note-taking,Book"><link rel="shortcut icon" href=https://sund.site/images/favicon.ico><link rel=stylesheet type=text/css media=screen href=https://sund.site/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css><link rel=stylesheet type=text/css media=screen href=https://sund.site/css/zozo.css><link rel=stylesheet type=text/css media=screen href=https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css><link rel=stylesheet type=text/css media=screen href=https://sund.site/css/highlight.css></head><body><div class="main animate__animated animate__fadeInDown"><div class="nav_container animated fadeInDown"><div class=site_nav id=site_nav><ul><li><a href=/>Home</a></li><li><a href=/posts/>Archive</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about/>About</a></li></ul></div><div class=menu_icon><a id=menu_icon><i class=ri-menu-line></i></a></div></div><div class="header animated fadeInDown"><div class=site_title_container><div class=site_title><h1><a href=https://sund.site/><span>電波障害</span></a></h1></div><div class=description><p class=sub_title>Steve Sun, full-stack developer</p><div class=my_socials><a href=https://github.com/stevedsun title=github target=_blank><i class=ri-github-fill></i></a><a href=https://twitter.com/way2steve title=twitter target=_blank><i class=ri-twitter-fill></i></a><a href=https://sund.site/index.xml type=application/rss+xml title=rss target=_blank><i class=ri-rss-fill></i></a></div></div></div></div><div class=content><div class=post_page><div class="post animate__animated animate__fadeInDown"><div class="post_title post_detail_title"><h2><a href=/posts/2022/write-error-message/>规范的错误信息</a></h2><span class=date>2022.08.23</span></div><div class="post_content markdown"><p>本文整理了 Google 官方文档中关于错误信息的编写规范。适用于有一定编程经验，尤其从事业务开发的程序员。</p><p>通过本文你可以：</p><ul><li>写出风格统一、用户友好的错误信息</li><li>提高代码的可维护性，降低沟通成本</li></ul><p>Google 文档原文：<a href=https://developers.google.com/tech-writing/error-messages>Error Messages</a></p><h2 id=基本原则>基本原则</h2><ul><li>错误不应该被掩盖 (Don&rsquo;t fail silently)</li><li>遵循语言的规范 (Follow the programming language guides)</li><li>实现完整的错误模型 (Implement the full error model)<blockquote><p>包含错误码、错误内容、错误原因、处理方法</p></blockquote></li><li>避免吞掉问题根源 (Avoid swallowing the root cause)</li><li>输出错误代码 (Log the error codes)</li><li>快速抛出错误 (Raise errors immediately)</li></ul><h2 id=解释错误原因>解释错误原因</h2><p>使用错误信息给用户解释原因时，应该遵循：</p><ul><li>具体，准确，避免含糊。</li><li>在错误信息中包含用户输入的错误内容。如果输入的内容特别长：<ul><li>渐进地显示，提供一个可展开详情的省略号。</li><li>截断内容，只保留必要部分。</li></ul></li><li>明确告诉用户，系统的要求和限制</li></ul><h2 id=解释如何处理问题>解释如何处理问题</h2><ul><li>对用户来说，错误信息必须有可操作性。也就是说，在解释了问题的原因后，说明如何解决这个问题。</li><li>最好给用户提供一个例子。</li></ul><h2 id=清晰的错误信息>清晰的错误信息</h2><ul><li>简明扼要，使用主动语态。（这方面内容可以参考<a href=https://sund.site/posts/2022/technical-writing/>技术文档写作指南</a>）</li><li>避免出现双重否定句式。</li><li>让目标用户能够理解，即根据用户掌握的知识，提供有帮助的内容。</li><li>专业术语应前后一致。</li></ul><h2 id=错误信息的格式>错误信息的格式</h2><ul><li>使用链接提供更多信息。</li><li>渐进式呈现错误信息（比如可以展开详情的省略号）。</li><li>错误提示应该贴近错误发生的位置。</li><li>避免错误信息滥用字体或颜色。</li><li>使用正确的语气:<ul><li>不要告诉用户错在哪，告诉用户应该做什么。</li><li>避免责备、幽默、道歉的语气。</li></ul></li></ul><h2 id=对后端开发的建议>对后端开发的建议</h2><ul><li>错误要有错误码</li><li>可以在错误信息结构里提供一个指向错误解释的 ID，如：<div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Bad Request - Request is missing a required parameter: -collection_name. Update parameter and resubmit. Issue Reference Number BR0x0071&#34;</span>
<span class=p>}</span>
</code></pre></div></li></ul></div><div class=post_footer><div class=meta><div class=info><span class="field tags"><i class=ri-stack-line></i><a href=https://sund.site/tags/%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97/>错误日志</a>
<a href=https://sund.site/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/>技术文档</a></span></div></div></div></div><div class=doc_comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"v2steve"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div><a id=back_to_top href=# class=back_to_top><i class=ri-arrow-up-s-line></i></a><footer class=footer><div class=footer_slogan><span></span></div></footer><script src=https://sund.site/js/jquery-3.5.1.min.js></script><link href=https://sund.site/css/fancybox.min.css rel=stylesheet><script src=https://sund.site/js/fancybox.min.js></script><script src=https://sund.site/js/zozo.js></script><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\[\[','\]\]']],processEscapes:true,processEnvironments:true,skipTags:['script','noscript','style','textarea','pre'],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}});MathJax.Hub.Queue(function(){var all=MathJax.Hub.getAllJax(),i;for(i=0;i<all.length;i+=1){all[i].SourceElement().parentNode.className+=' has-jax';}});</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-64688885-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>