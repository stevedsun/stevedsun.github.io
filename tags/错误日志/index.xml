<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>错误日志 - Tag - 電波障害</title><link>https://sund.site/tags/%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97/</link><description>错误日志 - Tag - 電波障害</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 23 Aug 2022 22:18:00 +0800</lastBuildDate><atom:link href="https://sund.site/tags/%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97/" rel="self" type="application/rss+xml"/><item><title>规范的错误信息</title><link>https://sund.site/posts/2022/write-error-message/</link><pubDate>Tue, 23 Aug 2022 22:18:00 +0800</pubDate><author>Steve Sun</author><guid>https://sund.site/posts/2022/write-error-message/</guid><description><![CDATA[<p></p>
<p>本文整理了 Google 官方文档中关于错误信息的编写规范。适用于有一定编程经验，尤其从事业务开发的程序员。</p>
<p>通过本文你可以：</p>
<ul>
<li>写出风格统一、用户友好的错误信息</li>
<li>提高代码的可维护性，降低沟通成本</li>
</ul>
<p>Google 文档原文：<a href="https://developers.google.com/tech-writing/error-messages" target="_blank" rel="noopener noreffer ">Error Messages</a></p>
<h2 id="基本原则">基本原则</h2>
<ul>
<li>错误不应该被掩盖 (Don&rsquo;t fail silently)</li>
<li>遵循语言的规范 (Follow the programming language guides)</li>
<li>实现完整的错误模型 (Implement the full error model)
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Tips<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">包含错误码、错误内容、错误原因、处理方法</div>
        </div>
    </div></li>
<li>避免吞掉问题根源 (Avoid swallowing the root cause)</li>
<li>输出错误代码 (Log the error codes)</li>
<li>快速抛出错误 (Raise errors immediately)</li>
</ul>
<h2 id="解释错误原因">解释错误原因</h2>
<p>使用错误信息给用户解释原因时，应该遵循：</p>
<ul>
<li>具体，准确，避免含糊。</li>
<li>在错误信息中包含用户输入的错误内容。如果输入的内容特别长：
<ul>
<li>渐进地显示，提供一个可展开详情的省略号。</li>
<li>截断内容，只保留必要部分。</li>
</ul>
</li>
<li>明确告诉用户，系统的要求和限制</li>
</ul>
<h2 id="解释如何处理问题">解释如何处理问题</h2>
<ul>
<li>对用户来说，错误信息必须有可操作性。也就是说，在解释了问题的原因后，说明如何解决这个问题。</li>
<li>最好给用户提供一个例子。</li>
</ul>
<h2 id="清晰的错误信息">清晰的错误信息</h2>
<ul>
<li>简明扼要，使用主动语态。（这方面内容可以参考<a href="https://sund.site/posts/2022/technical-writing/" target="_blank" rel="noopener noreffer ">技术文档写作指南</a>）</li>
<li>避免出现双重否定句式。</li>
<li>让目标用户能够理解，即根据用户掌握的知识，提供有帮助的内容。</li>
<li>专业术语应前后一致。</li>
</ul>
<h2 id="错误信息的格式">错误信息的格式</h2>
<ul>
<li>使用链接提供更多信息。</li>
<li>渐进式呈现错误信息（比如可以展开详情的省略号）。</li>
<li>错误提示应该贴近错误发生的位置。</li>
<li>避免错误信息滥用字体或颜色。</li>
<li>使用正确的语气:
<ul>
<li>不要告诉用户错在哪，告诉用户应该做什么。</li>
<li>避免责备、幽默、道歉的语气。</li>
</ul>
</li>
</ul>
<h2 id="对后端开发的建议">对后端开发的建议</h2>
<ul>
<li>错误要有错误码</li>
<li>可以在错误信息结构里提供一个指向错误解释的 ID，如：
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;error&#34;</span><span class="p">:</span> <span class="s2">&#34;Bad Request - Request is missing a required parameter: -collection_name. Update parameter and resubmit. Issue Reference Number BR0x0071&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<hr>

]]></description></item></channel></rss>